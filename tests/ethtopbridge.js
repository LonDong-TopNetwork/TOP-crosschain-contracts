const { expect } = require("chai");
const { call } = require('./helpers/call')
const hardhat = require('hardhat')
const { deployContract } = require('ethereum-waffle')
const { deployMockContract } = require('./helpers/deployMockContract')
const { AddressZero } = require("ethers").constants

const toWei = ethers.utils.parseEther

const overrides = { gasLimit: 9500000 }

describe('TopPridge', () => {

  let wallet, wallet2,wallet3
  let topBridge

  beforeEach(async () => {
    [wallet, wallet2,wallet3] = await hardhat.ethers.getSigners()
    provider = hardhat.ethers.provider

    const TopBridge =  await hre.ethers.getContractFactory("TopPridgeTest", wallet, overrides)
    topBridge = await TopBridge.deploy()

    console.log("wallet>>>> "  + wallet.address)

    console.log("topBridge>>>> "  + topBridge.address)

    await topBridge.initialize(1,wallet.address)
  })

  // describe('blockHashes', () => {
  //   it('It is empty', async () => {
  //     let isSave = await topBridge.blockHashes('0x0000000000000000000000000000000000000000000000000000000000a4814d');
  //     console.log("isSave: " + isSave)
  //   })

  // })
  
  // describe('decodeLightClientBlocks', () => {
  //   it('decodeLightClientBlocks', async () => {
  //     let data = '0xf90479b9047600f90472b86d00f86a06808462a2ff54a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a02560aa5801a859974f1b2b237d005642291eae1b523f3c2947445630326205eaf9022c03f90228f843a04646566e6865425332794a4c776c622b713678482f444c2b526f746276526464a0000000000000000000000000000000000000000000000000000000000000000080f843a050494d7965765279566f4b4e6f67686263644d5a7572534e6a484553356c744fa0000000000000000000000000000000000000000000000000000000000000000080f843a04e52486552477734595a6e5448654e477859747541737653736c54563754484da0000000000000000000000000000000000000000000000000000000000000000080f843a04d6d6c79634f4f2f79385a2f4d44724355773539386e495530475a6c78416759a0000000000000000000000000000000000000000000000000000000000000000080f843a046376532457438367a593350494a3242682f776778634b545464677866667576a0000000000000000000000000000000000000000000000000000000000000000080f843a0502b733936696c7572687261465537524432556136307244384370674478436aa0000000000000000000000000000000000000000000000000000000000000000080f843a04338314a32506c644b554d322b4a6a6b677a6d4c57634872416251793757394fa0000000000000000000000000000000000000000000000000000000000000000080f843a046796841364250326d5462674f736d7351466a513039723969586e2b6633666da0000000000000000000000000000000000000000000000000000000000000000080f901b0f84601f843a005608c4095adca688fa75c1ef32c2537adc92366ec4898031422c1b14fd7ae48a03ef93e3543f98ffea6e3a1eccb904cd9baf4253e49bfa01391038da08fa2d2de80f84601f843a00dc2cdaf92ffa65eaf68d341390b83a40fa8f2b98e4a748ce0273b2d5e329f0fa07e6aa4c2d21c0139c4c0cc16b349b2ca161a907132951910e84eeebaac755ed580f84601f843a0550f547f58b159a263ec05ab66a1dc20bf1919a33e4b2f8ad3a9127b4bab2018a05f5ec9ee12a8fb9fc822052a6c84404166e4c94c1eb9d0f209d51a604a45dbeb01f84601f843a091adbec88a4d931318dd36454e43420ca3024e3508ea677e57f22678cda86484a0207b246965488604321aa0f1393e52b0948dcb997807f1bb5b9e173caabd83a001f84601f843a05906757a4b655bd7b842fe843c4cfd9eb86d2c7eeef8b805055d0e5cdb0d8419a02eba398814f9a36cc95e2baacefa2380a3869b2d1e90266602ec146bce4d872101f84601f843a08d5621ff1c9a6327f76cd147137e97167ea7f349d8f279f2721599c6f032993aa02a55d623d978d5e0bf986ca0a03cbcb10514e8a5aa7cf277744b8083f6689b5b01'
  //     let client = await topBridge.decodeLightClientBlocks(data);
  //     console.log("decodeLightClientBlocks->>>>" + client)
  
  //   })
  // })

  // describe('checkValidatorSignatureTest', () => {
  //   it('checkValidatorSignatureTest', async () => {
  //     let client = await topBridge.checkValidatorSignatureTest(data);

  //     console.log("decodeLightClientBlocks->>>>" , JSON.stringify(client))
  
  //   })
  // })

  describe('decodeLightClientBlock', () => {
    console.log("test111")
    it('decodeLightClientBlocks', async () => {
      let data = '0x00f90472b86d00f86a01808462a83718a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a00000000000000000000000000000000000000000000000000000000000000000a0bc8a5e458acada2e980c788dca2f774fa5b0bacff574e248284cb7c05b6b8174f9022c01f90228f843a051559e17814b6c892f095bfaaeb11ff0cbf91a2d6ef45d77d61e24aba0d6d3fea05a9a53741dfa2b330e1f19874ec879bbd04a80f0e05e9a45bf205ea98531a13580f843a03ba526113685c55c717ea2a62410ee57ab4e38a22ce3c7151548845a85a45184a0720425107d65c4c7364f19153a6c9cc0f91d683243c9e300a045b115192107ba80f843a0d4477911b0e186674c778d1b162db80b2f4ac95357b4c732cdc0f5124cfb5560a0eb78324385e62b68bc1d6f9fdc868ceca6af707ec93214cf1732ad5a9ec85d6e80f843a0ca67f6de0f0de1e876851e89a9a28a9b12ddb9cd193e0c6e4ff29c6258d699c8a0baabf89e512154ebf509467925b78d71657f54d4e29f7c6ebe5fec38a371d4b580f843a05eded84b7ceb36373c8276061ff083170a4d3760c5f7eebda1c9dc06d1f7d6d0a0afd8c081434a0b21bda9b6036e053be1e5130d915ca0ac9c1967bb505e12705a80f843a0ffacf7a8a5bab86b68553b443d946bad2b0fc0a9803c428d6729ebbcaaec3e74a0d207f47a3e6f0468b0a99d86c2811601c5c51ea5254d05bc22a2161c293978a980f843a032f5faef900537f5e7fb2eb0ff091c0af471bac7af3f225d19cb7d9e3b8b3685a0b5cd591a10f6393b8210c50d3b47100b42e19ef67a42191a8a23ee3dbead0b9f80f843a05ca103a04fda64db80eb26b10163434f6bf625e7f9fddf99c78e6fe3b56989aba0eaa0e8ecac03bf6e6238c455f2704e82e9efe84500b630ca89dbcc13d624b81480f901b0f84601f843a0c679da4969e87318bd75c5095e31091aeaaf0f4d3d52bb2e013d3389d91005e8a07c6e6a5af1e923afe5a231acd5e7266836f3c34aacd52ff44f77c51adb39fd0a01f84601f843a0597503bf20e2c488b0af2ee31b9d51f2feb03afda2bb9b21b1963646e424a2f3a031f475dd057a71492c362a4c79f3fb79add4f332c82e4179c2b19d4f7d971fb480f84601f843a087bc17f432570d7d06c8a14e3cd53a3f62ed53e827aea58a4f45759eb29d8b84a050795d7216749bb289079ebbfa80cf37557e36b5e988ebbcd7c88d27f977532301f84601f843a0bfa52213c843f9b34266a82c4f1901c5febc868c5bf4954c44ee8829e63e21b2a059af6ce1ada80d3ac9bb8b1957f2bff1e80613aad9347b096f6d5e4b011fae9980f84601f843a032619ec528bc3e981d24171cee5ce86f3824161672270995d17fbdb1c318c9e1a07f2f9f3aca0d2e21341483755264844e99bd4abc09d78ea19ab3a733c64de65701f84601f843a08cd979a5658115d1e487866b1fe0c67017055e7354a6ec30c6fb84c6aa5eba9ca03357d9c6a6704a41b4778573a9994540ccfe9378c6bbfc81ecb5c5663697df7701'
      let client = await topBridge.decodeLightClientBlock(data);

      console.log("decodeLightClientBlocks->>>>" , JSON.stringify(client))
  
    })
  })
  

  // describe('initWithBlock', () => {
  //   it('initWithBlock', async () => {
  //     let initData = '0x00f90473b86d00f86a01808462a6d523a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a0bc8a5e458acada2e980c788dca2f774fa5b0bacff574e248284cb7c05b6b8174f9022d01f90229f844a04014d61d848cd43ac4380215efd5df580a38833c096ad65607db0cde06d3da3ca0747b5b342dad9a2f897e2ab3d5c85b48c81129f688f4f9d95c1661e4ec94884281fff843a03ba526113685c55c717ea2a62410ee57ab4e38a22ce3c7151548845a85a45184a0720425107d65c4c7364f19153a6c9cc0f91d683243c9e300a045b115192107ba80f843a0d4477911b0e186674c778d1b162db80b2f4ac95357b4c732cdc0f5124cfb5560a0eb78324385e62b68bc1d6f9fdc868ceca6af707ec93214cf1732ad5a9ec85d6e80f843a044d3804bfa1c516dc53542419062a17739336a176f988f420a0eeaa95794f133a04cf2b80f6caecf8a407d0a9fc7000146f8b49dfd44634095cbd6771c97f6f82480f843a05eded84b7ceb36373c8276061ff083170a4d3760c5f7eebda1c9dc06d1f7d6d0a0afd8c081434a0b21bda9b6036e053be1e5130d915ca0ac9c1967bb505e12705a80f843a0ffacf7a8a5bab86b68553b443d946bad2b0fc0a9803c428d6729ebbcaaec3e74a0d207f47a3e6f0468b0a99d86c2811601c5c51ea5254d05bc22a2161c293978a980f843a032f5faef900537f5e7fb2eb0ff091c0af471bac7af3f225d19cb7d9e3b8b3685a0b5cd591a10f6393b8210c50d3b47100b42e19ef67a42191a8a23ee3dbead0b9f80f843a05ca103a04fda64db80eb26b10163434f6bf625e7f9fddf99c78e6fe3b56989aba0eaa0e8ecac03bf6e6238c455f2704e82e9efe84500b630ca89dbcc13d624b81480f901b0f84601f843a0f4747e986fb68743b1acb933126f832ac85cc4486bf13b6a331c6827a964f549a07de73d1c97bfe73ac0af96335030a482f38c05c2f1edd7fae0e9eafe7096da8a80f84601f843a0b3295959d7fc27497dbefa3f3e9fd1dcbfc0b0ccc402585b98f03edf993f5554a05973f0469af78fa1516f7e5876e1ad964015e1b9285d7ec266cb54ea60dcd08a01f84601f843a04ced347d4b17e0da5d0a1dc396627ea9dfc37e13357ffec3a9d53831096da0e2a024c8d008815d95c935edc7827ad36fc5cb383651a4c43d76c35e14246c9ae32580f84601f843a0a947d93b7da99af2b2e95048069fde631271315d63a53d018a859cb8e9ec697da00aedb11d70ee9be64a26b4734dd307c6103279c840151ad0d76d063b78a71eb780f84601f843a0efc09db6b18c14e8b612567fa1ff167fbd169be376c9c8be0049246116b96632a039c6f8f4d35e1911955a12925cabc60205be87aa9ba10459133d2a888acbefba80f84601f843a03655afeb0a811c98a568ee565e758fc6db98e74bf5a9f325085147b3520a46e1a002c033fb4a0689c937f44b8322d310e9edb86e3f004fcced14f6fb4efdd4372201'
  //     await topBridge.initWithBlock(initData);
  //   })

  // })
  // describe('sign', () => {
  //   it('sign', async () => {
  //     let addr = await topBridge.sign('0xa150fd62d56a04f789523a25369bb285998cb563491942b167b62b26f96a6f7c','0x3a717b6b0814bdd2733fe6b1e2a31594d742725c41734dd0b0f61ec51bf5690b2c9e75a36ca56c6023b8efa43b891acafbd431272cd02d6d82ac8de7a7263e54');

  //     console.log("sign->>>>" ,addr)
  
  //   })
  // })

  
  // describe('addLightClientBlock', () => {
  //   it('is owner', async () => {
  //     //0x1
  //     let initData = '0x00f90473b86d00f86a01808462a6d523a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a0bc8a5e458acada2e980c788dca2f774fa5b0bacff574e248284cb7c05b6b8174f9022d01f90229f844a04014d61d848cd43ac4380215efd5df580a38833c096ad65607db0cde06d3da3ca0747b5b342dad9a2f897e2ab3d5c85b48c81129f688f4f9d95c1661e4ec94884281fff843a03ba526113685c55c717ea2a62410ee57ab4e38a22ce3c7151548845a85a45184a0720425107d65c4c7364f19153a6c9cc0f91d683243c9e300a045b115192107ba80f843a0d4477911b0e186674c778d1b162db80b2f4ac95357b4c732cdc0f5124cfb5560a0eb78324385e62b68bc1d6f9fdc868ceca6af707ec93214cf1732ad5a9ec85d6e80f843a044d3804bfa1c516dc53542419062a17739336a176f988f420a0eeaa95794f133a04cf2b80f6caecf8a407d0a9fc7000146f8b49dfd44634095cbd6771c97f6f82480f843a05eded84b7ceb36373c8276061ff083170a4d3760c5f7eebda1c9dc06d1f7d6d0a0afd8c081434a0b21bda9b6036e053be1e5130d915ca0ac9c1967bb505e12705a80f843a0ffacf7a8a5bab86b68553b443d946bad2b0fc0a9803c428d6729ebbcaaec3e74a0d207f47a3e6f0468b0a99d86c2811601c5c51ea5254d05bc22a2161c293978a980f843a032f5faef900537f5e7fb2eb0ff091c0af471bac7af3f225d19cb7d9e3b8b3685a0b5cd591a10f6393b8210c50d3b47100b42e19ef67a42191a8a23ee3dbead0b9f80f843a05ca103a04fda64db80eb26b10163434f6bf625e7f9fddf99c78e6fe3b56989aba0eaa0e8ecac03bf6e6238c455f2704e82e9efe84500b630ca89dbcc13d624b81480f901b0f84601f843a0f4747e986fb68743b1acb933126f832ac85cc4486bf13b6a331c6827a964f549a07de73d1c97bfe73ac0af96335030a482f38c05c2f1edd7fae0e9eafe7096da8a80f84601f843a0b3295959d7fc27497dbefa3f3e9fd1dcbfc0b0ccc402585b98f03edf993f5554a05973f0469af78fa1516f7e5876e1ad964015e1b9285d7ec266cb54ea60dcd08a01f84601f843a04ced347d4b17e0da5d0a1dc396627ea9dfc37e13357ffec3a9d53831096da0e2a024c8d008815d95c935edc7827ad36fc5cb383651a4c43d76c35e14246c9ae32580f84601f843a0a947d93b7da99af2b2e95048069fde631271315d63a53d018a859cb8e9ec697da00aedb11d70ee9be64a26b4734dd307c6103279c840151ad0d76d063b78a71eb780f84601f843a0efc09db6b18c14e8b612567fa1ff167fbd169be376c9c8be0049246116b96632a039c6f8f4d35e1911955a12925cabc60205be87aa9ba10459133d2a888acbefba80f84601f843a03655afeb0a811c98a568ee565e758fc6db98e74bf5a9f325085147b3520a46e1a002c033fb4a0689c937f44b8322d310e9edb86e3f004fcced14f6fb4efdd4372201'
  //     await topBridge.initWithBlock(initData);

  //     let x  = await topBridge.x();
  //     let y  = await topBridge.y();
  //     console.log("epoch->>>>" ,x)
  //     console.log("epoch->>>>" ,y)
  //     //0x2
  //     // let data = '0x00f90474b86d00f86a02808462a6d684a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000a0a7907f37f33484bf3ca06432b10189c528197c1babc54491d9eb0f8512408d6df9022e02f9022af844a04014d61d848cd43ac4380215efd5df580a38833c096ad65607db0cde06d3da3ca0747b5b342dad9a2f897e2ab3d5c85b48c81129f688f4f9d95c1661e4ec94884281fff843a03ba526113685c55c717ea2a62410ee57ab4e38a22ce3c7151548845a85a45184a0720425107d65c4c7364f19153a6c9cc0f91d683243c9e300a045b115192107ba80f843a0d4477911b0e186674c778d1b162db80b2f4ac95357b4c732cdc0f5124cfb5560a0eb78324385e62b68bc1d6f9fdc868ceca6af707ec93214cf1732ad5a9ec85d6e80f844a0208873efbde7a529fbf2c5eed5a54428fe2c9ff999b2a9a81da7234904e861b9a0120f5cc57476d8751c078789e2900c640e5d2e1313dd22b73c0132e15f0cdb5b81fff843a05eded84b7ceb36373c8276061ff083170a4d3760c5f7eebda1c9dc06d1f7d6d0a0afd8c081434a0b21bda9b6036e053be1e5130d915ca0ac9c1967bb505e12705a80f843a0ffacf7a8a5bab86b68553b443d946bad2b0fc0a9803c428d6729ebbcaaec3e74a0d207f47a3e6f0468b0a99d86c2811601c5c51ea5254d05bc22a2161c293978a980f843a032f5faef900537f5e7fb2eb0ff091c0af471bac7af3f225d19cb7d9e3b8b3685a0b5cd591a10f6393b8210c50d3b47100b42e19ef67a42191a8a23ee3dbead0b9f80f843a05ca103a04fda64db80eb26b10163434f6bf625e7f9fddf99c78e6fe3b56989aba0eaa0e8ecac03bf6e6238c455f2704e82e9efe84500b630ca89dbcc13d624b81480f901b0f84601f843a051565dd5765986ae9b4149a720d826136d076649a60083026fbf58b852153489a020bfb284b6fde27c46edf514d778ab34d2643c44eb2ba125d3818f1f83c7f9ad80f84601f843a03a717b6b0814bdd2733fe6b1e2a31594d742725c41734dd0b0f61ec51bf5690ba02c9e75a36ca56c6023b8efa43b891acafbd431272cd02d6d82ac8de7a7263e5480f84601f843a0a2b3e70c98801c3d266af958d6a3cb918c39dc296a3f9b66699a2ca3f8b07064a04a9b08ae3ac649ec0d2a5b5366f66584af4e7982761808deb5d052564e03f72080f84601f843a0d0ecbce85a480277a523b7d58fe24b8a11a524723ab7cd2d1199feba2e1f6d91a0209c4be351af8e02a9d70b82cda43413b1c836374f01c753fce27912ccd5762180f84601f843a013e500af896a1ce0425ae620ee7159b29a576c1c7806793b2d69cd08cc74cd5aa03c14f0f5a52d5c6a5454b19e55c3150b6abfb6b7e668db24e5ffd21dafabe42b01f84601f843a068992b65a3e173a7133bcf61d63ab45c27eb45ed85d420f1cc7258a6b6914621a02f1c1cf49349f97f6c131512dfd997829a0734dd35fddce709bf87f641fbc3d180'
  //     // await topBridge.addLightClientBlockTest(data);
  //   })
  // })
})
