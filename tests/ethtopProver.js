const { expect } = require("chai");
const { call } = require('./helpers/call')
const hardhat = require('hardhat')
const { deployMockContract } = require('./helpers/deployMockContract')
const { AddressZero } = require("ethers").constants

const toWei = ethers.utils.parseEther

const overrides = { gasLimit: 9500000 }

describe('TopProver', () => {

  let wallet, wallet2,wallet3
  let topProver
  let topBridge

  beforeEach(async () => {
    [wallet, wallet2,wallet3] = await hardhat.ethers.getSigners()
    provider = hardhat.ethers.provider

    console.log("wallet>>>> "  + wallet.address)

    const TopBridge =  await hre.ethers.getContractFactory("TopPridgeTest", wallet, overrides)
    topBridge = await TopBridge.deploy()
    
    const TopProver =  await hre.ethers.getContractFactory("TopProverTest", wallet, overrides)
    topProver = await TopProver.deploy(topBridge.address)

  })

  // describe('verifyHash', () => {
  //   it('There is no hash', async () => {
  //       await expect(topProver.verifyHash('0x0000000000000000000000000000000000000000000000000000000000000001')
  //       ).to.be.revertedWith('fail to decode')
  //   })

  //   it('There is hash', async () => {
  //     await topBridge.setBlockHashes('0x0000000000000000000000000000000000000000000000000000000000000001',true)
  //     let{valid,reason} = await topProver.verifyHash('0x0000000000000000000000000000000000000000000000000000000000000001');
  //   })

  // })

  // describe('getAddLightClientTime', () => {
  //   it('There is no height', async () => {
  //       await expect(topProver.getAddLightClientTime(2)
  //       ).to.be.revertedWith('Height is not confirmed1')
  //   })

  //   it('There is height', async () => {
  //     await topBridge.setBlockHeights(2,100)
  //     expect(await call(topProver,"getAddLightClientTime",2)).to.equal(100)
  //   })

  // })

  describe('verify', () => {
    it('There is verify', async () => {
        await topProver.decode1('0x00000000000000007c000000f87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec500009c020000000000008b01000002f901870184018d16a7b9010000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002000000080000000000000000000000000040000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000400000000000000000f87cf87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec5000010020000f9020da018cb01ada19534daa6b2a4be938ba3b0e995cda302e19605ba0af0e318f45e88a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347943ecef08d0e2dad803847e052249bb4f8bff2d5bba01e474562bd20cf62a5d72d68fc8ff55077dcd6d682c894ac32c6335b2c315855a09defbc77deb51f1490059b04124b61ce6a011e6fab55682e002618cd7b87e817a0b1e93cc34eae66ba703e7687a61f1119e50a59f7b3ddd33a7782b267fc3041c1b9010082b3ada297c7684159e4d7f8e0312b656cb3ce4f4c9c9bd825212c751d29df2bd12d8b6b0269f83f83977bcac4739b975f19f1514adc3e3717f78fb24b7ffa6b4da3546e681ab4e8b9ef376cddb267a8ffa369fea5477fdd3f565f6f82f57c005b04b746ab9232a0e778bf894cfda846a7a2d91b7ecadf7e52651097037e04b0a6c6bf7aea427a431d4c3c4d0ae3ddf26058af75bb7ebc3c8de21ff54eb4ee208febc99fb4faebac5e6f42929793df3b6f741e50ebef52832cf50fbf6b8b8bf5711c92b37d922b0b23d30c3857ff735edf2edaf0073f44599b2d79fb1b4ee30263be2d5ba9304fe3edc593ceba5fdf06b66e5833ebe9e35646afdbfdfa2ef8f7872985bc36b433a383e5d6788401c9c3648401c99adb8462c0222b8473656f31a0f2f54a1e6de70f7dd7a6c52968bb81bb930a94b1c6be792222ac5e83f8134b24882a780000000ed7a2850221281ccf0700000034010000f90131a0c199ccfe87e1276986126bd2b082f91cc2c87ab1515d72712d83483df16b506ca0d4e6435cdcaea24df6205e74d922980afdd1587eab60f8e4441e2931af073f11a03d7c541b4283441b363932cf9af71cd066b9b67269ec3fc21e9a7395cbe8ba80a0e035c9acba04db6804ec15f6d4cee60f89986ff02def6e534619a470298a6c65a05e548c566f22b6f929ff06728a37c06f873f0dbd6c1db3d2ec33232803adef48a0f47475bd9d7087838c3de24d483b23c1b8fca806d61623dedada2b7bc5c2d4aba04737d2327957cdb0ce8f8d6f9453ccc471dd2646e810a4e507b8475fb7b7651fa0677bc73e7155705a04973b3919492c3e26524e0b2be4a35cc5611459bb1bbe24a060c7cba3fee180ec353079a1a8b1411913a2468ef8bc9dcc525620b6f7b08c69808080808080808073000000f871a0d9deba9bbef8bd46d321016f925d2dbc147ac253e5f3630875cbc6df17bffc55a0390de58d0a36cf252ad05409046265ed0c37a0291de80811ca71f566b4da9647a0e5473f750714b3ce5703a3a8fe3681a1a695127cf61fa83a84347c83d9d25e4d808080808080808080808080808023000000e210a0e828cda66c8d0735b74ca9f619bf6b123949fc2566969ec123e02efca4d1a84453000000f85180a08faa87e1b3c468311ac50663d2f414e61b3e39447d27535188301500a7e1f1c4a0c9ace7a0f4c0e8267ef8692ad32ffe546437dee205929f9c85b92eb3a1492b618080808080808080808080808080b4010000f901b1a069f42feaac3cd0837128242b56a20ee0f6f9246d83d7652e192897f330f14113a093f4620f294a8513fcd015a0a13a0728493019210b2eba04f6d12b177e087ac8a0feee62bce372e2f3b4980dd232ae590e5f90d817ee4eb6103f77f755af8615d1a0a4c6c851beef6c6a494d03df7413c4e53f236b00ec1748966abae0d574920ddda0b3bf516800e65ef26b116a04fd4fb45cef1acfc25d4ce97861fd9a7bcc621c6da06957e8963fbcb748bb9e3f391778618422c9f46268d9ee6d038034b5aa2e502fa038cf6e1424a694a0f2d7858833d583f51a4f3394916d76ef7fb02539c7b09e0fa0eb8b8936a635c26686b8637a5ec2570a8555084c514270338831f5a4e3eedc6da07fe0f91f38cd4c059b7f954a3c3716d83a5f71e560e3637550ddee4088364b87a05f18563ffc72ad4910472994806774f8f589e2779211bc3d87bf116df68c22d0a0a40ab20a206557b9c0711ec976779db3a2586dd6b8860d3e2ea2195fab4a3218a0cb4a9f1d0ca866498ac949544886b25e04b2a5d20a48422e5460f2d2be43af0ba02b9cb31eaf228ccfa0e993aa1128b12fe831cb9d872b6a315009cdf547e332408080808014020000f90211a05a1aad0921023bcd572d973910de29015de1af65a7cd74ddc8d5425b1bbb1bb0a08fc9b8b3fcabd1a4605de03ba999893534e3742afcf23cab363735316dbce913a0a0e86bffea0806805f66bf1a8e1a74ac6f0d41033a0ae38a8aa6ea0ed3c9c5f7a0a7d4a2cff41041de53396fe3fabd2e3f19d59ccb8bf2304f522043da16046d52a0d30a76110863277da28c03ed5e827fb41872b89831121fbd2ec38875d309c12ea0ee13557bb058d201a3f4f54c355f2eb9ea063fdede6a3cda043945101e90ddd5a0d3ff37413b042060cd9743e6bddfd5c86501e691e2e375896971a3cb8f91a948a0542bd696bb2ed79525860219a492e21f5173cfd9495936aa9f0567c6935943afa0e90d517d1db8b3ec0ae26ea94b98cfb587d37111d8f2c989754cc042a87e7fdba0f1bafc4f3e1ac396b52f40fc3b3b1a32e9fc71038006b52c08a02c8142346bcea0cce937e8858926a888ec31977bdb741ca78dd9e45e3bb4676289414e55dfc400a0cefce3fb5640d5c5681cb35c5b2f6881b93523fd72b358349cfce702adb5a806a017f8381468993293c4c0f942e1a1ea2295e155825cc51fcd9b415480d7d29910a09230bf83961b48f331559610c27f05d55dda0ce276050d966c3b797fd2ea66dda0a9bdf2ebf261f8f5621d84d40b0e956c527703138cc8554dd2605b44243f58eba0b6c5611bb3bbd85d9bab42ef02c2313a84e2ff05e9c1dd69c83a064affca0c6d8092010000f9018f20b9018b02f901870184018d16a7b9010000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002000000080000000000000000000000000040000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000400000000000000000f87cf87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec50000')
        // let data = await topProver.decode2('0x00000000000000007c000000f87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec500009c020000000000008b01000002f901870184018d16a7b9010000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002000000080000000000000000000000000040000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000400000000000000000f87cf87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec5000010020000f9020da018cb01ada19534daa6b2a4be938ba3b0e995cda302e19605ba0af0e318f45e88a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347943ecef08d0e2dad803847e052249bb4f8bff2d5bba01e474562bd20cf62a5d72d68fc8ff55077dcd6d682c894ac32c6335b2c315855a09defbc77deb51f1490059b04124b61ce6a011e6fab55682e002618cd7b87e817a0b1e93cc34eae66ba703e7687a61f1119e50a59f7b3ddd33a7782b267fc3041c1b9010082b3ada297c7684159e4d7f8e0312b656cb3ce4f4c9c9bd825212c751d29df2bd12d8b6b0269f83f83977bcac4739b975f19f1514adc3e3717f78fb24b7ffa6b4da3546e681ab4e8b9ef376cddb267a8ffa369fea5477fdd3f565f6f82f57c005b04b746ab9232a0e778bf894cfda846a7a2d91b7ecadf7e52651097037e04b0a6c6bf7aea427a431d4c3c4d0ae3ddf26058af75bb7ebc3c8de21ff54eb4ee208febc99fb4faebac5e6f42929793df3b6f741e50ebef52832cf50fbf6b8b8bf5711c92b37d922b0b23d30c3857ff735edf2edaf0073f44599b2d79fb1b4ee30263be2d5ba9304fe3edc593ceba5fdf06b66e5833ebe9e35646afdbfdfa2ef8f7872985bc36b433a383e5d6788401c9c3648401c99adb8462c0222b8473656f31a0f2f54a1e6de70f7dd7a6c52968bb81bb930a94b1c6be792222ac5e83f8134b24882a780000000ed7a2850221281ccf0700000034010000f90131a0c199ccfe87e1276986126bd2b082f91cc2c87ab1515d72712d83483df16b506ca0d4e6435cdcaea24df6205e74d922980afdd1587eab60f8e4441e2931af073f11a03d7c541b4283441b363932cf9af71cd066b9b67269ec3fc21e9a7395cbe8ba80a0e035c9acba04db6804ec15f6d4cee60f89986ff02def6e534619a470298a6c65a05e548c566f22b6f929ff06728a37c06f873f0dbd6c1db3d2ec33232803adef48a0f47475bd9d7087838c3de24d483b23c1b8fca806d61623dedada2b7bc5c2d4aba04737d2327957cdb0ce8f8d6f9453ccc471dd2646e810a4e507b8475fb7b7651fa0677bc73e7155705a04973b3919492c3e26524e0b2be4a35cc5611459bb1bbe24a060c7cba3fee180ec353079a1a8b1411913a2468ef8bc9dcc525620b6f7b08c69808080808080808073000000f871a0d9deba9bbef8bd46d321016f925d2dbc147ac253e5f3630875cbc6df17bffc55a0390de58d0a36cf252ad05409046265ed0c37a0291de80811ca71f566b4da9647a0e5473f750714b3ce5703a3a8fe3681a1a695127cf61fa83a84347c83d9d25e4d808080808080808080808080808023000000e210a0e828cda66c8d0735b74ca9f619bf6b123949fc2566969ec123e02efca4d1a84453000000f85180a08faa87e1b3c468311ac50663d2f414e61b3e39447d27535188301500a7e1f1c4a0c9ace7a0f4c0e8267ef8692ad32ffe546437dee205929f9c85b92eb3a1492b618080808080808080808080808080b4010000f901b1a069f42feaac3cd0837128242b56a20ee0f6f9246d83d7652e192897f330f14113a093f4620f294a8513fcd015a0a13a0728493019210b2eba04f6d12b177e087ac8a0feee62bce372e2f3b4980dd232ae590e5f90d817ee4eb6103f77f755af8615d1a0a4c6c851beef6c6a494d03df7413c4e53f236b00ec1748966abae0d574920ddda0b3bf516800e65ef26b116a04fd4fb45cef1acfc25d4ce97861fd9a7bcc621c6da06957e8963fbcb748bb9e3f391778618422c9f46268d9ee6d038034b5aa2e502fa038cf6e1424a694a0f2d7858833d583f51a4f3394916d76ef7fb02539c7b09e0fa0eb8b8936a635c26686b8637a5ec2570a8555084c514270338831f5a4e3eedc6da07fe0f91f38cd4c059b7f954a3c3716d83a5f71e560e3637550ddee4088364b87a05f18563ffc72ad4910472994806774f8f589e2779211bc3d87bf116df68c22d0a0a40ab20a206557b9c0711ec976779db3a2586dd6b8860d3e2ea2195fab4a3218a0cb4a9f1d0ca866498ac949544886b25e04b2a5d20a48422e5460f2d2be43af0ba02b9cb31eaf228ccfa0e993aa1128b12fe831cb9d872b6a315009cdf547e332408080808014020000f90211a05a1aad0921023bcd572d973910de29015de1af65a7cd74ddc8d5425b1bbb1bb0a08fc9b8b3fcabd1a4605de03ba999893534e3742afcf23cab363735316dbce913a0a0e86bffea0806805f66bf1a8e1a74ac6f0d41033a0ae38a8aa6ea0ed3c9c5f7a0a7d4a2cff41041de53396fe3fabd2e3f19d59ccb8bf2304f522043da16046d52a0d30a76110863277da28c03ed5e827fb41872b89831121fbd2ec38875d309c12ea0ee13557bb058d201a3f4f54c355f2eb9ea063fdede6a3cda043945101e90ddd5a0d3ff37413b042060cd9743e6bddfd5c86501e691e2e375896971a3cb8f91a948a0542bd696bb2ed79525860219a492e21f5173cfd9495936aa9f0567c6935943afa0e90d517d1db8b3ec0ae26ea94b98cfb587d37111d8f2c989754cc042a87e7fdba0f1bafc4f3e1ac396b52f40fc3b3b1a32e9fc71038006b52c08a02c8142346bcea0cce937e8858926a888ec31977bdb741ca78dd9e45e3bb4676289414e55dfc400a0cefce3fb5640d5c5681cb35c5b2f6881b93523fd72b358349cfce702adb5a806a017f8381468993293c4c0f942e1a1ea2295e155825cc51fcd9b415480d7d29910a09230bf83961b48f331559610c27f05d55dda0ce276050d966c3b797fd2ea66dda0a9bdf2ebf261f8f5621d84d40b0e956c527703138cc8554dd2605b44243f58eba0b6c5611bb3bbd85d9bab42ef02c2313a84e2ff05e9c1dd69c83a064affca0c6d8092010000f9018f20b9018b02f901870184018d16a7b9010000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000002000000080000000000000000000000000040000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000400000000000000000f87cf87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca000000000000000000000000028a714546da3afd6489a364dad9f67ff57b0dbbba000000000000000000000000000000000000000000000000000b1a2bc2ec50000')
        // console.log(JSON.stringify(data))

    })
  })

})
